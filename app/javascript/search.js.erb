console.log("loading search.js")




$(document).ready(function () {
    const $searchButton = $("#search-button");
    const $ingredientInput = $("#ingredient");
    const $recipesList = $("#recipes-list");

    // HIDE API KEY
    const apiKey = "41508a215dec45bd93fe8f98c36450c0";

    $searchButton.on("click", function () {
        const ingredient = $ingredientInput.val().trim();

        if (ingredient) {
            fetchRecipes(ingredient, apiKey);
        } else {
            alert("Please enter an ingredient.");
        }
    });

    function fetchRecipes(ingredient, apiKey) {
        const url = `https://api.spoonacular.com/recipes/findByIngredients?ingredients=${ingredient}&number=10&apiKey=${apiKey}`;

        $recipesList.html("Loading recipes...");

        $.ajax({
            url: url,
            method: "GET",
            success: function (data) {
                displayRecipes(data);
            },
            error: function (error) {
                console.error("Error fetching recipes:", error);
                $recipesList.html("There was an error fetching recipes.");
            }
        });
    }

    function displayRecipes(recipes) {
        if (recipes.length > 0) {
            const recipeHtml = recipes
                .map(recipe => {
                    return `
                        <div class="recipe">
                            <h3>${recipe.title}</h3>
                            <p>Used Ingredients: ${recipe.usedIngredientCount}</p>
                            <p>Missed Ingredients: ${recipe.missedIngredientCount}</p>
                            <a href="${recipe.sourceUrl}" target="_blank">View Recipe</a>
                        </div>
                    `;
                })
                .join("");
            $recipesList.html(recipeHtml);
        } else {
            $recipesList.html("No recipes found for this ingredient.");
        }
    }
});

